<% content_for(:title) { "#{@worker.full_name} â€“ #{t('worker_salaries.title')}" } %>

<div class="max-w-7xl mx-auto">
  <div class="mb-6">
    <%= render "shared/back_link", fallback: worker_path(@worker) %>
    <div class="flex items-center justify-between mt-2">
      <div>
        <h1 class="page-title"><%= t("worker_salaries.title") %></h1>
        <p class="text-sm text-slate-500 mt-1"><%= @worker.full_name %></p>
      </div>
      <% if policy(WorkerSalary).create? %>
        <div class="flex items-center gap-2">
          <%= link_to t("worker_salaries.new_title"), new_worker_worker_salary_path(@worker),
            class: "btn-primary",
            aria: { label: t("worker_salaries.new_title") } %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="glass-card-flush">
    <% if @worker_salaries.any? %>
      <div class="overflow-x-auto">
        <table class="table-premium" role="table">
          <thead>
            <tr>
              <th><%= t("worker_salaries.effective_from") %></th>
              <th><%= t("worker_salaries.gross_monthly") %></th>
              <th><%= t("worker_salaries.net_monthly") %></th>
              <th><%= t("worker_salaries.daily_rate") %></th>
              <th class="text-right"><%= t("common.actions") %></th>
            </tr>
          </thead>
          <tbody>
            <% @worker_salaries.each do |salary| %>
              <tr>
                <td class="text-slate-900"><%= format_date(salary.effective_from) %></td>
                <td class="text-slate-700"><%= format_currency(salary.gross_monthly_ron, date: salary.effective_from) %></td>
                <td class="text-slate-700"><%= format_currency(salary.net_monthly_ron, date: salary.effective_from) %></td>
                <td class="text-slate-700"><%= format_currency(salary.derived_daily_rate_ron, date: salary.effective_from) %></td>
                <td class="text-right space-x-2">
                  <% if policy(salary).update? %>
                    <%= link_to t("common.edit"), edit_worker_worker_salary_path(@worker, salary),
                      class: "link-primary text-sm" %>
                  <% end %>
                  <% if policy(salary).destroy? %>
                    <%= button_to t("common.delete"), worker_worker_salary_path(@worker, salary),
                      method: :delete,
                      form: { data: { turbo_confirm: t("common.confirm_delete") } },
                      class: "link-danger text-sm" %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="p-6">
        <p class="text-sm text-slate-500"><%= t("common.no_records") %></p>
      </div>
    <% end %>
  </div>
</div>
