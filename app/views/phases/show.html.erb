<% content_for(:title) { "#{@phase.name} â€” #{@project.name}" } %>

<div class="max-w-5xl mx-auto">
  <div class="mb-6">
    <%= render "shared/back_link", fallback: project_path(@project) %>
    <div class="flex items-center justify-between mt-2">
      <div class="flex items-center gap-3">
        <h1 class="page-title"><%= @phase.name %></h1>
        <%= status_badge(@phase.status) %>
        <%= priority_badge(@phase.priority) %>
      </div>
      <% if policy(@phase).update? %>
        <div class="flex items-center gap-2">
          <%= link_to t("common.edit"), edit_project_phase_path(@project, @phase),
            class: "btn-secondary",
            aria: { label: "#{t('common.edit')} #{@phase.name}" } %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="glass-card p-6 mb-6">
    <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
      <div>
        <dt class="text-sm font-medium text-slate-500"><%= t("phases.status") %></dt>
        <dd class="mt-1"><%= status_badge(@phase.status) %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-slate-500"><%= t("phases.priority") %></dt>
        <dd class="mt-1"><%= priority_badge(@phase.priority) %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-slate-500"><%= t("phases.start_date") %></dt>
        <dd class="mt-1 text-sm text-slate-900"><%= format_date(@phase.planned_start_date) %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-slate-500"><%= t("phases.end_date") %></dt>
        <dd class="mt-1 text-sm text-slate-900"><%= format_date(@phase.planned_end_date) %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-slate-500"><%= t("projects.title") %></dt>
        <dd class="mt-1 text-sm">
          <%= link_to @project.name, project_path(@project), class: "link-primary hover:underline" %>
        </dd>
      </div>
      <% if @phase.description.present? %>
        <div class="md:col-span-2">
          <dt class="text-sm font-medium text-slate-500"><%= t("common.description") %></dt>
          <dd class="mt-1 text-sm text-slate-900 whitespace-pre-wrap"><%= @phase.description %></dd>
        </div>
      <% end %>
    </dl>
  </div>
</div>
